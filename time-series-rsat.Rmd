---
title: "Downloading & Processing Data Cubes: `rsat.pkg`"
output: github_document
---

```{r setup, include=FALSE, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```

```{r, echo=FALSE}
library(animation)
library(bfast)
library(BH)
library(boot)
library(bslib)
library(Cairo)
library(caret)
library(codetools)
library(colorspace)
library(compiler)
library(conflicted)
library(corrplot)
library(cowplot)
library(cpp11)
library(credentials)
library(curl)
library(doParallel)
library(downloader)
library(dplyr)
library(dtw)
library(dtwclust)
library(e1071)
library(earthdatalogin)
library(forecast)
library(formatR)
library(gdalBindings)
library(gdalcubes)
library(geojsonsf)
library(geos)
library(geosphere)
library(ggplot2)
library(ggstats)
library(ggThemeAssist)
#library(gifski)
library(globals)
library(googledrive)
library(gridExtra)
library(gtable)
library(highr)
library(htmltools)
library(httpuv)
library(httr)
library(httr2)
library(jpeg)
library(jsonify)
library(jsonlite)
library(knitr)
library(lattice)
library(lazyraster)
library(leafem)
library(leafgl)
library(leafsync)
library(libgeos)
library(lmtest)
library(lubridate)
library(lwgeom)
library(kableExtra)
library(kernlab)
library(magrittr)
library(maps)
library(markdown)
library(Matrix)
library(ModelMetrics)
library(modelr)
library(modeltools)
library(ncdf4)
library(ncdf4.helpers)
library(NTSS)
library(nlme)
library(olsrr)
library(openssl)
library(openxlsx)
library(pandoc)
library(proj4)
library(purrr)
library(R.utils)
library(randomForest)
library(ranger)
library(raster)
library(rcmdcheck)
library(RColorBrewer)
library(Rcpp)
library(RcppArmadillo)
library(RcppParallel)
library(RcppThread)
library(RcppTOML)
library(rapidjsonr)
library(readr)
library(readxl)
library(recipes)
library(remotes)
library(reprex)
library(reshape2)
library(rex)
library(rgl)
library(rJava)
library(rlang)
library(rmarkdown)
library(rnaturalearthdata)
library(RNetCDF)
library(rpart)
library(rspm)
library(RSQLite)
library(rstac)
library(Rwtss)
library(s2)
library(scales)
library(selectr)
library(servr)
library(sf)
library(shape)
options("sp_evolution_status" = 2)
library(spatial)
library(spatstat)
library(spatstat.data)
library(spatstat.explore)
library(spatstat.geom)
library(spatstat.gui)
library(spatstat.Knet)
library(spatstat.linnet)
library(spatstat.model)
library(spatstat.random)
library(spatstat.sparse)
library(spatstat.utils)
library(stars)
library(startup)
library(strucchangeRcpp)
library(styler)
library(sys)
library(sysfonts)
library(terra)
library(testthat)
library(tibble)
library(tidyr)
library(tidyselect)
library(tidyverse)
library(tinytest)
library(tinytex)
library(timechange)
library(timeDate)
library(tmaptools)
library(tmap)
library(tzdb)
library(units)
library(usethis)
library(viridis)
library(vroom)
library(warp)
library(wk)
library(whoami)
library(xfun)
library(xgboost)
library(XML)
library(xopen)
library(xtable)
library(xts)
library(yaml)
library(ymlthis)
library(zeallot)
library(zip)
library(vapour)
library(xts)
library(zoo)
```

### Data Sources

So far, the `rsat` packaged has proved most reliable in successfully accessing, identifying, processing and downloading time-series data cubes. In addition, as the package was written by remote sensing experts with remote sensing experts in mind, the package provides a far richer and more sophisticated set of functions and customizable tools. As a result however, it involves longer processing and coding time.

```{r}
library(getSpatialData) 
login_USGS(username = "seamusrobertmurphy@gmail.com")
login_CopHub(username = "seamusrobertmurphy@gmail.com")
login_earthdata(username = "seamusrobertmurphy@gmail.com")
services()
```

```{r, eval=FALSE}
library(rsat)
set_credentials("username","password", "earthdata")

```

### Loading Data Libraries

```{r}
library(sf)
library(tmap)
roi = sf::read_sf("~/git_repos/remote-sensing-lake-chilwa/roi/chilwa_watershed_4326.shp")
toi <- as.Date("2021-01-01") + 0:15
# Visualize aoi
tmap_mode("view")
tm_shape(st_geometry(roi)) +  
  tm_polygons()

rcd <- rsat_search(
  region = roi, dates = toi,
  product = c("LANDSAT_ETM_C1", "LANDSAT_ETM_C1", "LANDSAT_TM_C1"))

class(rcd)
rsat::rsat_search()


```

You can also embed plots, for example:

```{r pressure, echo=FALSE}
unique(sat_name(rcd))
names(rcd)[1]
unique(dates(rcd))
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
